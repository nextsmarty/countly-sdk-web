!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Countly=t():e.Countly=t()}(window,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var o;!function(n,i){void 0===(o=function(){return function(e){"use strict";var t,n,o,i="18.04",r="javascript_native_web",a=!1,s=!1,c="/i",d=500,l=1e3,u=[],f=[],m=[],p=[],v={},g=[],_=null,h=!0,y=0,w=null,x=0,b=0,k=0,L=60,C=3600,O=0,S=60,T=10,E=0,N=!0,M=!1,A={},q={},H=/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,P=/(CountlySiteBot|nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver|bingbot|Google Web Preview|Mediapartners-Google|AdsBot-Google|Baiduspider|Ezooms|YahooSeeker|AltaVista|AVSearch|Mercator|Scooter|InfoSeek|Ultraseek|Lycos|Wget|YandexBot|Yandex|YaDirectFetcher|SiteBot|Exabot|AhrefsBot|MJ12bot|TurnitinBot|magpie-crawler|Nutch Crawler|CMS Crawler|rogerbot|Domnutch|ssearch_bot|XoviBot|netseer|digincore|fr-crawler|wesee|AliasIO)/,j=!0;(e=e||{}).features=["sessions","events","views","scrolls","clicks","forms","crashes","attribution","users","star-rating","location"];for(var B,I={},D=0;D<e.features.length;D++)I[e.features[D]]={};e.init=function(t,n){if(!a&&(o=K(),a=!0,u=fe("cly_queue")||[],v={},f=fe("cly_event")||[],d=(t=t||{}).interval||e.interval||d,l=t.queue_size||e.queue_size||l,L=t.fail_timeout||e.fail_timeout||L,C=t.inactivity_time||e.inactivity_time||C,S=t.session_update||e.session_update||S,T=t.max_events||e.max_events||T,e.ignore_prefetch=t.ignore_prefetch||e.ignore_prefetch||!0,e.debug=t.debug||e.debug||!1,e.app_key=t.app_key||e.app_key||null,e.device_id=t.device_id||e.device_id||G(),e.url=ne(t.url||e.url||""),e.app_version=t.app_version||e.app_version||"0.0",e.country_code=t.country_code||e.country_code||null,e.city=t.city||e.city||null,e.ip_address=t.ip_address||e.ip_address||null,e.ignore_bots=t.ignore_bots||e.ignore_bots||!0,e.force_post=t.force_post||e.force_post||!1,e.q=e.q||[],e.onload=e.onload||[],e.ignore_visitor=t.ignore_visitor||e.ignore_visitor||!1,e.require_consent=t.require_consent||e.require_consent||!1,t.ignore_referrers&&t.ignore_referrers.constructor===Array?g=t.ignore_referrers:e.ignore_referrers&&e.ignore_referrers.constructor===Array&&(g=e.ignore_referrers),""===e.url&&(V("Please provide server URL"),e.ignore_visitor=!0),fe("cly_ignore")&&(e.ignore_visitor=!0),e.ignore_prefetch&&void 0!==document.visibilityState&&"prerender"===document.visibilityState&&(e.ignore_visitor=!0),e.ignore_bots&&P.test(navigator.userAgent)&&(e.ignore_visitor=!0),window.name&&0===window.name.indexOf("cly:")?e.passed_data=JSON.parse(window.name.replace("cly:","")):location.hash&&0===location.hash.indexOf("#cly:")&&(e.passed_data=JSON.parse(location.hash.replace("#cly:",""))),e.passed_data&&e.passed_data.token&&e.passed_data.purpose&&(e.passed_data.token!=fe("cly_old_token")&&(le(e.passed_data.token),fe("cly_old_token",e.passed_data.token)),"heatmap"===e.passed_data.purpose&&(e.ignore_visitor=!0,pe(),me(e.url+"/views/heatmap.js",ve))),!e.ignore_visitor)){V("Countly initialized"),e.onload.constructor!==Array&&(e.onload=[]),e.q.constructor!==Array&&(e.q=[]),$(),fe("cly_id",e.device_id);var i=0;if(location.search){var r=location.search.substring(1).split("&");for(i=0;i<r.length;i++){var s=r[i].split("=");"cly_id"==s[0]?fe("cly_cmp_id",s[1]):"cly_uid"==s[0]&&fe("cly_cmp_uid",s[1])}}if(void 0!==e.onload&&e.onload.length>0){for(i=0;i<e.onload.length;i++)"function"==typeof e.onload[i]&&e.onload[i]();e.onload=[]}}},e.group_features=function(e){if(e)for(var t in e)({}),I[t]?V("Feature name "+t+" is already reserved"):"string"==typeof e[t]?I[t]={features:[e[t]]}:e[t]&&e[t].constructor===Array&&e[t].length?I[t]={features:e[t]}:V("Incorrect feature list for "+t+" value: "+e[t]);else V("Incorrect features: "+e)},e.check_consent=function(t){return!e.require_consent||(I[t]?!(!I[t]||!I[t].optin):(V("No feature available for "+t),!1))},e.check_any_consent=function(){if(!e.require_consent)return!0;for(var t in I)if(I[feature]&&I[feature].optin)return!0;return!1},e.add_consent=function(t){if(V("Adding consent for "+t),t.constructor===Array)for(var n=0;n<t.length;n++)e.add_consent(t[n]);else I[t]?I[t].features?(I[t].optin=!0,e.add_consent(I[t].features)):!0!==I[t].optin&&(A[t]=!0,I[t].optin=!0,R(),setTimeout(function(){"sessions"===t&&q.begin_session?(e.begin_session.apply(e,q.begin_session),q.begin_session=null):"views"===t&&q.track_pageview&&(w=null,e.track_pageview.apply(e,q.track_pageview),q.track_pageview=null),q.change_id&&(e.change_id.apply(e,q.change_id),q.change_id=null)},1)):V("No feature available for "+t)},e.remove_consent=function(t){if(V("Removing consent for "+t),t.constructor===Array)for(var n=0;n<t.length;n++)e.remove_consent(t[n]);else I[t]?(I[t].features?e.remove_consent(I[t].features):!1!==I[t].optin&&(A[t]=!1,R()),I[t].optin=!1):V("No feature available for "+t)};var R=function(){B&&(clearTimeout(B),B=null),B=setTimeout(function(){ue(A)&&(z({consent:JSON.stringify(A)}),A={})},1e3)};function J(t){if(!e.ignore_visitor)if(t.key){t.count||(t.count=1);var n=oe(t,["key","count","sum","dur","segmentation"]);n.timestamp=Q();var o=new Date;n.hour=o.getHours(),n.dow=o.getDay(),n._id=ge(n.key+n.timestamp+n.segmentation.url),f.push(n),m.push(n._id),fe("cly_event",f),V("Adding event: ",t)}else V("Event must have key property")}e.begin_session=function(n){if(e.check_consent("sessions")){if(!s){V("Session started"),t=K(),s=!0,h=!n;var o={begin_session:1};o.metrics=JSON.stringify(U()),z(o)}}else q.begin_session=arguments},e.session_duration=function(t){e.check_consent("sessions")&&s&&(V("Session extended",t),z({session_duration:t,_events:m}))},e.end_session=function(n){e.check_consent("sessions")&&s&&(n=n||K()-t,V("Ending session"),F(),s=!1,z({end_session:1,session_duration:n}))},e.change_id=function(t,n){if(e.device_id!=t){n||(e.end_session(),v={});var o=e.device_id;e.device_id=t,fe("cly_id",e.device_id),V("Changing id"),n?e.check_any_consent()?z({old_device_id:o}):q.change_id=arguments:e.begin_session(!h)}},e.add_event=function(t){e.check_consent("events")&&J(t)},e.start_event=function(e){v[e]?V("Timed event with key "+e+" already started"):v[e]=K()},e.end_event=function(t){"string"==typeof t&&(t={key:t}),t.key?v[t.key]?(t.dur=K()-v[t.key],e.add_event(t),delete v[t.key]):V("Timed event with key "+t.key+" was not started"):V("Event must have key property")},e.user_details=function(t){if(e.check_consent("users")){V("Adding userdetails: ",t);z({user_details:JSON.stringify(oe(t,["name","username","email","organization","phone","picture","gender","byear","custom"]))})}},e.report_conversion=function(t,n){e.check_consent("attribution")&&(t=t||fe("cly_cmp_id")||"cly_organic",n=n||fe("cly_cmp_uid"),t&&n?z({campaign_id:t,campaign_user:n}):t&&z({campaign_id:t}))};var X={},Y=function(t,n,o){e.check_consent("users")&&(X[t]||(X[t]={}),"$push"==o||"$pull"==o||"$addToSet"==o?(X[t][o]||(X[t][o]=[]),X[t][o].push(n)):X[t][o]=n)};function F(){if(w){var t={name:w,segment:n};e.check_consent("views")&&J({key:"[CLY]_view",dur:K()-x,segmentation:t}),w=null}}function z(t){if(!e.ignore_visitor)if(e.app_key&&e.device_id){t.app_key=e.app_key,t.device_id=e.device_id,t.sdk_name=r,t.sdk_version=i,e.check_consent("location")?(e.country_code&&(t.country_code=e.country_code),e.city&&(t.city=e.city),null!==e.ip_address&&(t.ip_address=e.ip_address)):t.location="",t.timestamp=Q();var n=new Date;t.hour=n.getHours(),t.dow=n.getDay(),u.length>l&&u.shift(),u.push(t),fe("cly_queue",u,!0)}else V("app_key or device_id is missing")}function $(){if(e.ignore_visitor)M=!1;else{M=!0;var n=0;if(void 0!==e.onload&&e.onload.length>0){for(n=0;n<e.onload.length;n++)"function"==typeof e.onload[n]&&e.onload[n]();e.onload=[]}if(void 0!==e.q&&e.q.length>0){var o,i=e.q;for(e.q=[],n=0;n<i.length;n++)if(V("Processing queued call",o=i[n]),"function"==typeof o)o();else if(o.constructor===Array&&o.length>0)if(void 0!==e[o[0]])e[o[0]].apply(null,o.slice(1));else{var r=o[0].replace("userData.","");void 0!==e.userData[r]&&e.userData[r].apply(null,o.slice(1))}}if(s&&h&&j){var a=K();a-t>S&&(e.session_duration(a-t),t=a)}if(f.length>0){if(f.length<=T)z({events:JSON.stringify(f)}),f=[];else{var c=f.splice(0,T);z({events:JSON.stringify(c)})}fe("cly_event",f)}if(u.length>0&&N&&K()>k){N=!1;var l=u.shift();ue(A)&&(B&&(clearTimeout(B),B=null),l.consent=JSON.stringify(A),A={}),V("Processing request",l),ee(l,function(e,t){V("Request Finished",t,e),e&&(u.unshift(t),k=K()+L),fe("cly_queue",u,!0),N=!0})}setTimeout($,d)}}function G(){return fe("cly_id")||W()}function W(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)});return t}function U(){var t={};if(t._app_version=e.app_version,t._ua=navigator.userAgent,screen.width){var n=screen.width?parseInt(screen.width):0,o=screen.height?parseInt(screen.height):0;if(0!==n&&0!==o){var i=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if(i&&window.devicePixelRatio)n=Math.round(n*window.devicePixelRatio),o=Math.round(o*window.devicePixelRatio);else if(90===Math.abs(window.orientation)){var r=n;n=o,o=r}t._resolution=n+"x"+o}}window.devicePixelRatio&&(t._density=window.devicePixelRatio);var a=navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage;if(void 0!==a&&(t._locale=a),void 0!==document.referrer&&document.referrer.length){var s=H.exec(document.referrer);if(s&&s[11]&&s[11]!=window.location.hostname){var c=!1;if(g&&g.length)for(var d=0;d<g.length;d++)try{var l=new RegExp(g[d]);if(l.test(document.referrer)){V("Ignored:",document.referrer),c=!0;break}}catch(e){}c||(t._store=document.referrer)}}return V("Got metrics",t),t}function V(){e.debug&&"undefined"!=typeof console&&(arguments[1]&&"object"==typeof arguments[1]&&(arguments[1]=JSON.stringify(arguments[1])),console.log(Array.prototype.slice.call(arguments).join("\n")))}function K(){return Math.floor((new Date).getTime()/1e3)}function Q(){var e=(new Date).getTime();return E>=e?E++:E=e,E}function Z(t,n,i){if(e.check_consent("crashes")&&t){i=i||_;var r="";"object"==typeof t?void 0!==t.stack?r=t.stack:(void 0!==t.name&&(r+=t.name+":"),void 0!==t.message&&(r+=t.message+"\n"),void 0!==t.fileName&&(r+="in "+t.fileName+"\n"),void 0!==t.lineNumber&&(r+="on "+t.lineNumber),void 0!==t.columnNumber&&(r+=":"+t.columnNumber)):r=t+"",n=!!n;var a=U(),s={_resolution:a._resolution,_error:r,_app_version:a._app_version,_run:K()-o,_not_os_specific:!0},c=navigator.battery||navigator.webkitBattery||navigator.mozBattery||navigator.msBattery;c&&(s._bat=Math.floor(100*c.level)),void 0!==navigator.onLine&&(s._online=!!navigator.onLine),s._background=!document.hasFocus(),p.length>0&&(s._logs=p.join("\n")),p=[],s._nonfatal=n,s._view=(window.location.pathname||"")+(window.location.search||"")+(window.location.hash||""),void 0!==i&&(s._custom=i);try{var d=document.createElement("canvas"),l=d.getContext("experimental-webgl");s._opengl=l.getParameter(l.VERSION)}catch(e){}z({crash:JSON.stringify(s)})}}function ee(t,n){try{V("Sending XML HTTP request");var o=window.XMLHttpRequest?new window.XMLHttpRequest:window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null,i=te(t),r="GET";i.length>=2e3?r="POST":e.force_post&&(r="POST"),"GET"===r?o.open("GET",e.url+c+"?"+i,!0):(o.open("POST",e.url+c,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded")),o.onreadystatechange=function(){4===this.readyState&&this.status>=200&&this.status<300?"function"==typeof n&&n(!1,t):4===this.readyState&&(V("Failed Server XML HTTP request",this.status),"function"==typeof n&&n(!0,t))},"GET"==r?o.send():o.send(i)}catch(e){V("Failed XML HTTP request",e),"function"==typeof n&&n(!0,t)}}function te(e){var t=[];for(var n in e)t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}function ne(e){return"/"==e.substr(e.length-1)?e.substr(0,e.length-1):e}function oe(e,t){for(var n,o={},i=0;i<t.length;i++)n=t[i],void 0!==e[n]&&(o[n]=e[n]);return o}e.userData={set:function(e,t){X[e]=t},set_once:function(e,t){Y(e,1,"$setOnce")},increment:function(e){Y(e,1,"$inc")},increment_by:function(e,t){Y(e,t,"$inc")},multiply:function(e,t){Y(e,t,"$mul")},max:function(e,t){Y(e,t,"$max")},min:function(e,t){Y(e,t,"$min")},push:function(e,t){Y(e,t,"$push")},push_unique:function(e,t){Y(e,t,"$addToSet")},pull:function(e,t){Y(e,t,"$pull")},save:function(){e.check_consent("users")&&z({user_details:JSON.stringify({custom:X})}),X={}}},e.track_errors=function(e){_=e,window.onerror=function(e,t,n,o,i){if(void 0!==i)Z(i,!1);else{o=o||window.event&&window.event.errorCharacter;var r="";void 0!==e&&(r+=e+"\n"),void 0!==t&&(r+="at "+t),void 0!==n&&(r+=":"+n),void 0!==o&&(r+=":"+o),r+="\n";try{for(var a=[],s=arguments.callee.caller;s;)a.push(s.name),s=s.caller;r+=a.join("\n")}catch(e){}Z(r,!1)}}},e.log_error=function(e,t){Z(e,!0,t)},e.add_log=function(t){e.check_consent("crashes")&&p.push(t)},e.stop_time=function(){j&&(j=!1,y=K()-t,b=K()-x)},e.start_time=function(){j||(j=!0,t=K()-y,x=K()-b,b=0)},e.track_sessions=function(t=!1){e.begin_session(),e.start_time(),ie(window,"beforeunload",function(){e.end_session()}),ie(window,"unload",function(){e.end_session()});var n="hidden";function o(){document[n]?t||e.stop_time():e.start_time()}function i(){O>=C&&e.start_time(),O=0}n in document?document.addEventListener("visibilitychange",o):(n="mozHidden")in document?document.addEventListener("mozvisibilitychange",o):(n="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",o):(n="msHidden")in document?document.addEventListener("msvisibilitychange",o):"onfocusin"in document?(ie(window,"focusin",function(){e.start_time()}),ie(window,"focusout",function(){e.stop_time()})):(ie(window,"focus",function(){e.start_time()}),ie(window,"blur",function(){e.stop_time()}),ie(window,"pageshow",function(){e.start_time()}),ie(window,"pagehide",function(){e.stop_time()})),ie(window,"mousemove",i),ie(window,"click",i),ie(window,"keydown",i),ie(window,"scroll",i),setInterval(function(){++O>=C&&e.stop_time()},6e4)},e.track_pageview=function(t,n){if(F(),t&&t.constructor===Array&&(n=t,t=null),t=t||window.location.pathname,n&&n.length)for(var o=0;o<n.length;o++)try{if(new RegExp(n[o]).test(t))return void V("Ignored:",t)}catch(e){}w=t,x=K();var i={name:t,visit:1,domain:window.location.hostname};if(void 0!==document.referrer&&document.referrer.length){var r=H.exec(document.referrer);r&&r[11]&&r[11]!=window.location.hostname&&(i.start=1)}e.check_consent("views")?J({key:"[CLY]_view",segmentation:i}):q.track_pageview=arguments},e.track_view=function(t,n){e.track_pageview(t,n)},e.track_clicks=function(t){t=t||document;var n=!0;ie(t,"click",function(t){if(n){if(n=!1,ae(t),void 0!==t.pageX&&void 0!==t.pageY){var o=se(),i=ce();e.check_consent("clicks")&&J({key:"[CLY]_action",segmentation:{type:"click",x:t.pageX,y:t.pageY,width:i,height:o,domain:window.location.hostname,view:window.location.pathname}})}setTimeout(function(){n=!0},1e3)}})},e.track_scrolls=function(t){t=t||window;var n=!0,o=0;function i(t){if(n){n=!1;var i=se(),r=ce(),a=de();e.check_consent("scrolls")&&J({key:"[CLY]_action",segmentation:{type:"scroll",y:o+a,width:r,height:i,domain:window.location.hostname,view:window.location.pathname}})}}ie(t,"scroll",function(e){o=Math.max(o,window.scrollY,document.body.scrollTop,document.documentElement.scrollTop)}),ie(t,"beforeunload",i),ie(t,"unload",i)},e.track_links=function(t){t=t||document,ie(t,"click",function(t){var n=re(t).closest("a");n&&(ae(t),e.check_consent("clicks")&&J({key:"linkClick",segmentation:{href:n.href,text:n.innerText,id:n.id,x:t.pageX,y:t.pageY,view:window.location.pathname}}),void 0===n.href||"_blank"===n.target||t.metaKey||t.altKey||t.ctrlKey||t.shiftKey||0!==n.href.replace(window.location.href.split("#")[0],"").indexOf("#")&&e.end_session())})},e.track_forms=function(t){function n(e){return e.name||e.id||e.type||e.nodeName}t=t||document,ie(t,"submit",function(t){var o,i=re(t),r={id:i.id,name:i.name,action:i.action,method:i.method,view:window.location.pathname};if(void 0!==i.elements){for(var a=0;a<i.elements.length;a++)if((o=i.elements[a])&&"password"!=o.type)if(void 0===r["input:"+n(o)]&&(r["input:"+n(o)]=[]),"select"==o.nodeName.toLowerCase())if(void 0!==o.multiple){var s=[];if(void 0!==o.options)for(var c=0;c<o.options.length;c++)o.options[c].selected&&s.push(o.options[c].value);r["input:"+n(o)].push(s.join(", "))}else r["input:"+n(o)].push(o.options[o.selectedIndex].value);else"input"==o.nodeName.toLowerCase()?void 0===o.type||"checkbox"!=o.type.toLowerCase()&&"radio"!=o.type.toLowerCase()?r["input:"+n(o)].push(o.value):o.checked&&r["input:"+n(o)].push(o.value):"textarea"==o.nodeName.toLowerCase()?r["input:"+n(o)].push(o.value):void 0!==o.value&&r["input:"+n(o)].push(o.value);for(var d in r)void 0!==r[d].join&&(r[d]=r[d].join(", "))}e.check_consent("forms")&&J({key:"formSubmit",segmentation:r}),e.end_session()})},e.collect_from_forms=function(t,n){t=t||document,ie(t,"submit",function(o){var i,r=re(o),a={},s=!1;if(void 0!==r.elements){var c,d,l={},u=t.getElementsByTagName("LABEL");for(c=0;c<u.length;c++)u[c].htmlFor&&""!==u[c].htmlFor&&(l[u[c].htmlFor]=u[c].innerText||u[c].textContent||u[c].innerHTML);for(c=0;c<r.elements.length;c++)if((i=r.elements[c])&&"password"!=i.type&&-1==i.className.indexOf("cly_user_ignore")){var f="";if("select"==i.nodeName.toLowerCase())if(void 0!==i.multiple){var m=[];if(void 0!==i.options)for(d=0;d<i.options.length;d++)i.options[d].selected&&m.push(i.options[d].value);f=m.join(", ")}else f=i.options[i.selectedIndex].value;else"input"==i.nodeName.toLowerCase()?void 0===i.type||"checkbox"!=i.type.toLowerCase()&&"radio"!=i.type.toLowerCase()?f=i.value:i.checked&&(f=i.value):"textarea"==i.nodeName.toLowerCase()?f=i.value:void 0!==i.value&&(f=i.value);if(i.className&&-1!=i.className.indexOf("cly_user_")){var p=i.className.split(" ");for(d=0;d<p.length;d++)if(0===p[d].indexOf("cly_user_")){a[p[d].replace("cly_user_","")]=f,s=!0;break}}else i.type&&"email"==i.type.toLowerCase()||i.name&&-1!=i.name.toLowerCase().indexOf("email")||i.id&&-1!=i.id.toLowerCase().indexOf("email")||i.id&&l[i.id]&&-1!=l[i.id].toLowerCase().indexOf("email")||/[^@\s]+@[^@\s]+\.[^@\s]+/.test(f)?(a.email||(a.email=f),s=!0):i.name&&-1!=i.name.toLowerCase().indexOf("username")||i.id&&-1!=i.id.toLowerCase().indexOf("username")||i.id&&l[i.id]&&-1!=l[i.id].toLowerCase().indexOf("username")?(a.username||(a.username=f),s=!0):i.name&&(-1!=i.name.toLowerCase().indexOf("tel")||-1!=i.name.toLowerCase().indexOf("phone")||-1!=i.name.toLowerCase().indexOf("number"))||i.id&&(-1!=i.id.toLowerCase().indexOf("tel")||-1!=i.id.toLowerCase().indexOf("phone")||-1!=i.id.toLowerCase().indexOf("number"))||i.id&&l[i.id]&&(-1!=l[i.id].toLowerCase().indexOf("tel")||-1!=l[i.id].toLowerCase().indexOf("phone")||-1!=l[i.id].toLowerCase().indexOf("number"))?(a.phone||(a.phone=f),s=!0):i.name&&(-1!=i.name.toLowerCase().indexOf("org")||-1!=i.name.toLowerCase().indexOf("company"))||i.id&&(-1!=i.id.toLowerCase().indexOf("org")||-1!=i.id.toLowerCase().indexOf("company"))||i.id&&l[i.id]&&(-1!=l[i.id].toLowerCase().indexOf("org")||-1!=l[i.id].toLowerCase().indexOf("company"))?(a.organization||(a.organization=f),s=!0):(i.name&&-1!=i.name.toLowerCase().indexOf("name")||i.id&&-1!=i.id.toLowerCase().indexOf("name")||i.id&&l[i.id]&&-1!=l[i.id].toLowerCase().indexOf("name"))&&(a.name||(a.name=""),a.name+=f+" ",s=!0)}}s&&(V("Gathered user data",a),n?e.user_details({custom:a}):e.user_details(a)),e.end_session()})},e.collect_from_facebook=function(t){FB&&FB.api&&FB.api("/me",function(n){var o={};if(n.name&&(o.name=n.name),n.email&&(o.email=n.email),"male"==n.gender?o.gender="M":"female"==n.gender&&(o.gender="F"),n.birthday){var i=n.birthday.split("/").pop();i&&4==i.length&&(o.byear=i)}if(n.work&&n.work[0]&&n.work[0].employer&&n.work[0].employer.name&&(o.organization=n.work[0].employer.name),t)for(var r in o.custom={},t){for(var a=t[r].split("."),s=n,c=0;c<a.length&&void 0!==(s=s[a[c]]);c++);void 0!==s&&(o.custom[r]=s)}e.user_details(o)})},e.opt_out=function(){e.ignore_visitor=!0,fe("cly_ignore",!0)},e.opt_in=function(){fe("cly_ignore",!1),e.ignore_visitor=!1,e.ignore_prefetch&&void 0!==document.visibilityState&&"prerender"===document.visibilityState&&(e.ignore_visitor=!0),e.ignore_bots&&P.test(navigator.userAgent)&&(e.ignore_visitor=!0),e.ignore_visitor||M||$()},Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;for(e=e.toUpperCase();t;){if(t.nodeName.toUpperCase()==e)return t;t=t.parentElement}});var ie=function(e,t,n){void 0!==e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},re=function(e){return e?void 0!==e.target?e.target:e.srcElement:window.event.srcElement};function ae(e){return void 0===e.pageY&&"number"==typeof e.clientX&&document.documentElement&&(e.pageX=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e.pageY=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),e}function se(){var e=document;return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))}function ce(){var e=document;return Math.max(Math.max(e.body.scrollWidth,e.documentElement.scrollWidth),Math.max(e.body.offsetWidth,e.documentElement.offsetWidth),Math.max(e.body.clientWidth,e.documentElement.clientWidth))}function de(){var e=document;return Math.min(Math.min(e.body.clientHeight,e.documentElement.clientHeight),Math.min(e.body.offsetHeight,e.documentElement.offsetHeight),window.innerHeight)}function le(e){fe("cly_token",e)}function ue(e){if(e)for(var t in e)return!0;return!1}var fe=function(e,t,n){n=n||!1;var o,i=!1;i=!0;try{"undefined"!=typeof localStorage&&localStorage.setItem("testLocal",!0)}catch(e){i=!1}if(void 0!==t&&null!==t&&("object"==typeof t&&(t=JSON.stringify(t)),i?localStorage.setItem(e,t):n||r(e,t,30)),void 0===t){i?o=localStorage.getItem(e):n||(o=function(e){for(var t=e+"=",n=document.cookie.split(";"),o=0,i=n.length;o<i;o++){for(var r=n[o];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null}(e));try{o=JSON.parse(o)}catch(e){}return o}function r(e,t,n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var i="; expires="+o.toGMTString();document.cookie=e+"="+t+i+"; path=/"}null===t&&(i?localStorage.removeItem(e):n||r(e,"",-1))};function me(e,t){var n,o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("src",e),t&&(o.onreadystatechange=o.onload=function(){n||t(),n=!0}),document.getElementsByTagName("head")[0].appendChild(o)}function pe(){var e=document.getElementById("cly-loader");if(!e){V("setting up loader");var t="#cly-loader {height: 4px; width: 100%; position: absolute; z-index: 99999; overflow: hidden; background-color: #fff; top:0px; left:0px;}#cly-loader:before{display: block; position: absolute; content: ''; left: -200px; width: 200px; height: 4px; background-color: #2EB52B; animation: cly-loading 2s linear infinite;}@keyframes cly-loading { from {left: -200px; width: 30%;} 50% {width: 30%;} 70% {width: 70%;} 80% { left: 50%;} 95% {left: 120%;} to {left: 100%;}}",n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t)),n.appendChild(o),(e=document.createElement("div")).setAttribute("id","cly-loader"),document.body.appendChild(e)}e.style.display="block"}function ve(){var e=document.getElementById("cly-loader");e&&(e.style.display="none")}function ge(e){return e.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0)}return e._internals={store:fe,getDocWidth:ce,getDocHeight:se,getViewportHeight:de,get_page_coord:ae,get_event_target:re,add_event:ie,getProperties:oe,stripTrailingSlash:ne,prepareParams:te,sendXmlHttpRequest:ee,recordError:Z,getMsTimestamp:Q,getTimestamp:K,log:V,getMetrics:U,generateUUID:W,getId:G,heartBeat:$,toRequestQueue:z,reportViewDuration:F,loadJS:me,loadCSS:function(e,t){var n,o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("href",e),t&&(o.onreadystatechange=o.onload=function(){n||t(),n=!0}),document.getElementsByTagName("head")[0].appendChild(o)},getLastView:function(){return w},setToken:le,getToken:function(){var e=fe("cly_token");return fe("cly_token",null),e},showLoader:pe,hideLoader:ve,add_cly_events:J},e.minty_track_pageview=function(e,t){t=t||{},e=e||window.location.pathname,t.id=e,t.url=t.url||window.location.href,w=e,void 0!==document.referrer&&document.referrer.length&&(t.ref=document.referrer),J({key:"pageview",segmentation:t})},e.minty_track_itemview=function(e,t){t=t||{};var n=e.className;t.id=ge(window.location.pathname+n+e.title),t.url=t.url||window.location.href,void 0!==document.referrer&&document.referrer.length&&(t.ref=document.referrer),J({key:n,segmentation:t})},e.minty_track_user_action=function(e,t){(t=t||{}).url=t.url||window.location.href,void 0!==document.referrer&&document.referrer.length&&(t.ref=document.referrer),J({key:e,segmentation:t})},e}(n.Countly)}.apply(t,[]))||(e.exports=o)}("undefined"!=typeof window?window:this)}])});